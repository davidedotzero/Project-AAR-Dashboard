# T10: แก้ไขปุ่ม "แก้ไข/ลบ" บน Project Card ไม่ทำงาน (Unclickable Buttons)

## 1. ปัญหา (Problem Statement)

ปุ่ม "แก้ไข" (Edit) และ "ลบ" (Delete) ที่อยู่บนคอมโพเนนต์ `ProjectCard` ในหน้า `/projects` ไม่ตอบสนองเมื่อถูกคลิก ทำให้ผู้ใช้ไม่สามารถจัดการโปรเจกต์ได้

ปัญหานี้น่าจะเกิดขึ้นหลังจากที่ได้นำฟีเจอร์ Drag and Drop เข้ามาใช้งานบนหน้าดังกล่าว ซึ่งตัวจัดการการลาก (Drag Handler) อาจจะเข้ามาขัดขวาง Event การคลิกของปุ่ม

## 2. เป้าหมาย (Goal)

ทำให้ปุ่ม "แก้ไข" และ "ลบ" บน `ProjectCard` กลับมาทำงานได้ตามปกติ คือเมื่อคลิกแล้วต้องสามารถเปิด Modal หรือเรียกฟังก์ชันที่เกี่ยวข้องได้ โดยที่ฟีเจอร์ Drag and Drop ของการ์ดยังคงทำงานได้เหมือนเดิม

## 3. การวิเคราะห์และสมมติฐาน (Analysis & Hypothesis)

**สมมติฐานหลัก (Primary Hypothesis): Event ของ Drag-and-Drop ขัดขวางการคลิก (Event Propagation Issue)**

* ไลบรารี Drag and Drop (เช่น dnd-kit) จะมีการเพิ่ม Event Listener (`onMouseDown`, `onTouchStart`) ครอบคลุมทั้ง `ProjectCard` เพื่อรอรับการลาก
* เมื่อผู้ใช้พยายามคลิกที่ปุ่ม "แก้ไข" หรือ "ลบ" ซึ่งเป็นส่วนหนึ่งของ `ProjectCard`, Event Listener ของ Drag and Drop จะทำงานก่อน และ "ดักจับ" Event นั้นไว้ (Event Capturing)
* มันจะตีความว่าผู้ใช้กำลังจะ "เริ่มลาก" การ์ด ไม่ใช่ "คลิก" ที่ปุ่ม ทำให้ Event การคลิกไม่ถูกส่งต่อไปยังปุ่ม (Event Propagation is stopped) ส่งผลให้ `onClick` ของปุ่มไม่ทำงาน

## 4. ขั้นตอนการแก้ไขและตรวจสอบ (Fix & Verification Steps)

### 4.1. ตรวจสอบเพื่อยืนยันสมมติฐาน

* [ ] **ทดลองปิดฟีเจอร์ Drag and Drop ชั่วคราว:**
    * ในโค้ดของหน้า `/projects` ให้ลอง Comment out ส่วนที่ห่อหุ้ม `ProjectCard` ด้วย Draggable context ของไลบรารี
    * ทดสอบดูว่าปุ่ม "แก้ไข/ลบ" กลับมาคลิกได้หรือไม่
    * **ถ้าคลิกได้** แสดงว่าสมมติฐานหลักถูกต้อง และให้ดำเนินการแก้ไขในขั้นตอน 4.2 ต่อไป

### 4.2. แนวทางการแก้ไข (เลือกวิธีที่เหมาะสมที่สุด)

#### **วิธีที่ 1: หยุดการส่งต่อ Event ที่ปุ่ม (Event Propagation)**

* [ ] ในคอมโพเนนต์ `ProjectCard` หรือที่ตัวปุ่ม "แก้ไข/ลบ" โดยตรง ให้แก้ไขฟังก์ชัน `onClick` เพื่อสั่งให้หยุดการส่งต่อ Event ไม่ให้ขึ้นไปถึงระดับของ Drag and Drop handler
* **ตัวอย่างโค้ด:**
    ```jsx
    <button
      onClick={(e) => {
        e.stopPropagation(); // หยุดการส่งต่อ Event ไม่ให้ Bubble up
        handleEditClick(); // เรียกฟังก์ชันแก้ไขโปรเจกต์ของคุณ
      }}
    >
      แก้ไข
    </button>
    ```

#### **วิธีที่ 2: กำหนด "จุดลาก" (Drag Handle) ที่เฉพาะเจาะจง**

* [ ] ปรับแก้การตั้งค่าของ Drag and Drop โดยไม่ให้ทั้งการ์ดเป็นพื้นที่สำหรับลาก แต่ให้กำหนดพื้นที่หรือไอคอนเล็กๆ (เช่น ไอคอน 6 จุดเรียงกัน) เป็น "มือจับ" (Handle) สำหรับการลากเท่านั้น
* [ ] วิธีนี้จะทำให้พื้นที่ส่วนอื่นๆ ของการ์ด รวมถึงปุ่มต่างๆ เป็นอิสระจาก Event ของ Drag and Drop และสามารถรับ Event `onClick` ได้ตามปกติ (วิธีนี้เป็น Best Practice สำหรับ UX ที่ดี)

### 4.3. ตรวจสอบ CSS ซ้อนทับ (ถ้าวิธีข้างบนยังไม่ได้ผล)

* [ ] ใช้ Browser DevTools (กด F12) คลิกขวาที่ปุ่มแล้วเลือก "Inspect" เพื่อตรวจสอบว่ามี Element โปร่งใสอื่นๆ มาวางซ้อนทับปุ่มอยู่หรือไม่ ซึ่งอาจเกิดจาก `z-index` หรือการวางเลเยอร์ของไลบรารี Drag and Drop

## 5. เกณฑ์การยอมรับ (Acceptance Criteria)

-   [ ] เมื่อคลิกที่ปุ่ม "แก้ไข" บน `ProjectCard` จะต้องสามารถเปิด `EditProjectModal` ขึ้นมาได้
-   [ ] เมื่อคลิกที่ปุ่ม "ลบ" บน `ProjectCard` จะต้องสามารถเปิด Modal ยืนยันการลบขึ้นมาได้
-   [ ] ฟีเจอร์ Drag and Drop สำหรับจัดลำดับ `ProjectCard` ทั้งใบ ยังคงต้องทำงานได้ตามปกติ